<head>
  <title>Jeep Score</title>

  <link rel="shortcut icon" type-"image/png" href="jeepscore.png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body {
      font-family: Sans;
    }

    .playerDelete {
      color: black;
      cursor: pointer;
      font-weight: bold;
    }

    .playerBid {
      width: 7ex;
    }

    .finishedGame {
      background-color: lightgrey;
    }

    button {
      margin: 0.5em;
    }

    .countContainer div {
      font-size: 600%;
      max-width: 88vw;
      overflow-x: hidden;
      text-align: center;
      cursor: default;
    }

    .deccount {
      font-size: 300%;
      font-weight: bold;
      margin-top: -0.4ex;
    }

    .inccount {
      font-size: 300%;
      font-weight: bold;
    }

    .counter {
      font-size: 600%;
      font-weight: bold;
    }

    table.scoreBoard {
      width: 100%;
    }

    table.scoreBoard .name {
      width: 60%;
    }

    table.scoreBoard td {
      vertical-align: middle;
    }

    table.scoreBoard .score {
      text-align: center;
    }

    table.scoreBoard .bid {
      font-size: 115%;
      font-weight: bold;
    }

    table.scoreBoard .yellow {
      background-color: yellow;
    }

    table.scoreBoard .win {
      background-color: limegreen;
    }

    table.scoreBoard .lose {
      background-color: salmon;
    }

    .timeTable {
      font-size: 80%;
    }

    .endTime {
      font-weight: bold;
    }

    .pastGamesList {
      font-family: monospace;
      font-size: 90%;
      width: 100%;
    }

    .pastGameLabel {
      display: inline;
      width: 100%;
    }

    .pastGameLabelCurrent {
      background-color: cyan;
    }

    #newGameSlot, #pastGamesSlot {
      margin-top: 2ex;
    }

    .playerContainer {
      width: 100%;
    }

    .buttonRow {
      margin-top: 1ex;
    }

    .gameControl {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .scoreMethod {
      font-size: 80%;
    }

    .pastGameEntry .edit {
      margin-left: 1em;
    }

    #scoreHelp {
      padding-left: 0.2em;
      padding-right: 0.5em;
    }

    #ohno {
      background-color: white;
      height: 100%;
      left: 0;
      opacity: 80%;
      position: fixed;
      top: 0;
      width: 100%;
    }

    #ohno img {
      max-height: 100vh;
      max-width: 100vw;
    }

    #help {
      background-color: white;
    }
  </style>

  <script src="jeepscore.js"></script>
</head>

<body>
  <template id="playerEntryTmpl">
    <div class="playerEntry">
      <span class="playerDelete">&#x24cd;</span>
      <input class="playerName" type="text" size="15" placeholder="Player name" minlength="1" maxlength="15" required></input>
      <input class="playerBid" type="number" size="4" placeholder="Bid" minlength="1" maxlength="4" inputmode="numeric" required></input>
      <button class="bidButton">Bid!</button>
    </div>
  </template>

  <template id="playerInGameRowTmpl">
    <tr class="playerInGame">
      <td class="playerName"></td>
      <td class="playerLow score"></td>
      <td class="playerBid score"></td>
      <td class="playerHigh score"></td>
    </tr>
  </template>

  <template id="currentGameTmpl">
    <fieldset id="gamePanel">
      <div id="gameContainer">
        <table class="timeTable">
          <tr class="startTime">
            <td>Started:</td> <td class="startTimeValue"></td>
          </tr>
          <tr class="endTime">
            <td>Ended:</td> <td class="endTimeValue"></td>
          </tr>
          <tr class="elapsedTime">
            <td>Elapsed:</td> <td class="elapsedTimeValue"></td>
          </tr>
        </table>
        <hr/>
        <table class="scoreBoard">
        </table>
        <div class="countContainer">
          <div class="inccount">&#x25B2;</div>
          <div class="counter"></div>
          <div class="deccount">&#x25BC;</div>
        </div>
        <div class="buttonRow gameControl">
          <button id="endGame">End</button>
          <label class="scoreMethod">Scoring:&nbsp;
            <select class="scoreAlgo">
            </select>
            <span id="scoreHelp">&#x2753;</span>
          </label>
        </div>
      </div>
    </fieldset>
  </template>

  <template id="pastGamesContainerTmpl">
    <fieldset id="pastGamesPanel">
      <div>
        <div class="pastGamesList">
        </div>
        <div class="buttonRow">
          <button id="loadGameButton">Load</button>
          <button id="deleteGameButton">Delete</button>
          <button id="deleteAllGamesButton">Delete All</button>
        </div>
      </div>
    </fieldset>
  </template>

  <template id="pastGameTmpl">
    <div class="pastGameEntry">
      <label class="pastGameLabel">
        <input type="checkbox"></input>
        <span class="labelText"></span>
      </label>
      <span class="edit">&#x1f589;</span>
    </div>
  </template>

  <template id="newGameTmpl">
    <fieldset id="playerEntryPanel">
        <div>
          <div id="playerEntryContainer"></div>
          <div class="buttonRow">
            <button id="addPlayer">Add Player</button>
            <button id="startGameButton">Start</button>
          </div>
        </div>
    </fieldset>
  </template>

  <template id="helpTmpl">
    <div id="help">
      <h2>Scoring Algorithms</h2>

      <h3>Spread Split</h3>
      The difference between the highest and lowest bid (the spread) is
      divided across each player (the split, rounded down) and their range
      is their bid plus or minus the split.  For example, if player A bids
      10 and player B bids 20, the spread is 10 (20 - 10) and the split is 5
      (10 / 2).  So player A's range is 5 (bid 10 - split 5) to 15 (bid
      10 + split 5), and player B's range is 15 (bid 20 - split 5) to 25
      (big 20 + split 5).
      <p>
      If the count is in the player's range, that player is a winner.

      <h3>Price Is Right</h3>
      Like in the game show, a player whose bid is closest to the count
      without going over is the winner.
    </div>
  </template>

  <template id="ohNoTmpl">
    <div id="ohno">
      <img src="ohno.svg">
    </div>
  </template>

  <div class="game">
    <div id="currentGameSlot"></div>
    <div id="newGameSlot"></div>
    <div id="pastGamesSlot"></div>
  </div>

<script>
// Main
GameUI.start();
</script>
</body>
